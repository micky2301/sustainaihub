<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SustainAIHub - AI Tools for Sustainable Businesses</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
        h1 { color: #228B22; text-align: center; }
        #filter { margin: 10px 0; padding: 10px; width: 200px; }
        table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #228B22; color: white; }
        tr:hover { background: #f5f5f5; }
        a { color: #0066cc; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .loading { text-align: center; color: #666; }
    </style>
</head>
<body>
    <h1>SustainAIHub: AI Tools & Services for Sustainable Businesses</h1>
    <p style="text-align: center;">Discover AI solutions for eco-impact. Filter by category:</p>
    <select id="filter" onchange="filterTable()">
        <option value="">All Categories</option>
        <!-- Options will populate from data -->
    </select>
    <div id="loading" class="loading">Loading listings...</div>
    <table id="listings" style="display: none;">
        <thead><tr><th>Name</th><th>Description</th><th>Website</th><th>Category</th></tr></thead>
        <tbody></tbody>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script>
        // Hardcoded data from your Sheet (updates on code push)
        const data = [
            { Name: 'Rainforest Connection', Description: 'Solar-powered AI audio devices detect illegal logging/poaching in forests via real-time sound analysis.', Website: 'https://rfcx.org/', Category: 'Biodiversity' },
            { Name: 'Kilimo', Description: 'AI analytics for smart irrigation: Uses satellite/weather data to predict crop water needs, cutting waste.', Website: 'https://kilimo.com/', Category: 'Agriculture' },
            { Name: 'Greyparrot', Description: 'Computer vision AI sorts recyclables in facilities, boosting efficiency and landfill diversion.', Website: 'https://www.greyparrot.ai/', Category: 'Waste Mgmt' },
            { Name: 'Okuafo Foundation', Description: 'Mobile app with image AI diagnoses crop diseases offline, helping small farmers reduce losses sustainably.', Website: 'https://okuafofoundation.com/', Category: 'Agriculture' },
            { Name: 'Flying Fish Tech', Description: 'AI underwater gliders map marine habitats in real-time for ecosystem monitoring and conservation.', Website: 'https://fft.ai/', Category: 'Marine Env' },
            { Name: 'Intuitive AI', Description: 'Sensor-based AI guides real-time waste sorting in public spaces, gamifying zero-waste habits.', Website: 'https://intuitiveai.ca/', Category: 'Waste Mgmt' },
            { Name: 'OpenAtlas', Description: 'Satellite AI tracks deforestation/land changes, aiding regulatory compliance for supply chains.', Website: 'https://www.open-atlas.com/', Category: 'Land Use' },
            { Name: 'Unspun', Description: 'AI-driven 3D weaving for on-demand custom clothes, slashing fashion inventory waste.', Website: 'https://www.unspun.io/', Category: 'Supply Chain' },
            { Name: 'BrainBox AI', Description: 'Real-time AI air quality monitoring with pollution forecasts for policy and health insights.', Website: 'brainboxai.com', Category: 'Air Quality' },
            { Name: 'EcoTrack AI', Description: 'Real-time AI dashboard for energy/carbon/waste tracking, optimized for enterprise sustainability.', Website: 'https://ecotrack.ai/', Category: 'Emissions' }
        ];

        function loadData() {
            // Simulate async load
            setTimeout(() => {
                // Populate filter with unique, trimmed categories
                const categories = [...new Set(data.map(row => row.Category ? row.Category.trim() : '').filter(cat => cat))].sort();
                const filter = document.getElementById('filter');
                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat.toLowerCase(); // Lower for case-insensitive match
                    option.textContent = cat;
                    filter.appendChild(option);
                });

                // Build table
                const tbody = document.querySelector('#listings tbody');
                data.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td><strong>${row.Name || ''}</strong></td>
                        <td>${row.Description || ''}</td>
                        <td><a href="${row.Website || '#'}" target="_blank">${row.Website || 'N/A'}</a></td>
                        <td>${row.Category || ''}</td>
                    `;
                    // Store category for filtering
                    tr.dataset.category = (row.Category || '').toLowerCase().trim();
                    tbody.appendChild(tr);
                });

                document.getElementById('loading').style.display = 'none';
                document.getElementById('listings').style.display = 'table';
                filterTable(); // Initial filter
            }, 500); // Fake load delay
        }

        function filterTable() {
            const filterValue = document.getElementById('filter').value.toLowerCase();
            const rows = document.querySelectorAll('#listings tbody tr');
            rows.forEach(row => {
                const cat = row.dataset.category || '';
                row.style.display = filterValue === '' || cat === filterValue ? '' : 'none';
            });
        }

        loadData();
    </script>
</body>
</html>
